/* eslint-disable @typescript-eslint/no-var-requires */
module.exports = () => {
    const { config } = require('dotenv');
    const { resolve } = require('path');
    const fs = require('fs');
    const envPath = resolve(__dirname, '../../.env');

    // Load environment variables generated from serverless.yml
    config({
        path: envPath,
    });

    // Delete env file generated by serverless to prevent confusion and deploy problems
    fs.unlink(envPath, (err) => {
        if (err && !err.message.includes('no such file or directory')) {
            console.error(err);
            return;
        }
    });
};
