(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"1FMF":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e[e.connected=1]="connected",e[e.in_use=2]="in_use",e[e.offline=3]="offline",e}({})},"6sSy":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("0IaG"),r=i("QKTh"),o=i("2Bf1"),a=i("fXoL"),c=i("wZkO"),s=i("ofXK"),u=i("bTqV"),l=i("ccMj"),p=i("wk0p");function f(e,t){if(1&e){var i=a.Wb();a.Vb(0,"mat-tab",8),a.Vb(1,"select-items",9),a.ec("itemsChange",(function(e){a.Hc(i);var n=t.$implicit;return a.ic().selectedItemsUpdated(e,n)})),a.jc(2,"async"),a.Ub(),a.Ub()}if(2&e){var n=t.$implicit,r=a.ic();a.qc("label",n.TabName),a.Cb(1),a.qc("items",a.kc(2,3,n.Items))("options",r.getSelectItemsOptions(n))}}var d=function(){function e(e,t,i){var n=this;this.data=e,this.dialogRef=t,this.selectItemsDialogService=i,this.response={displayedItemTypes:[]},this.tabs=e.displayedItemTypes.map((function(e){return n.getTabFromType(e)})),this.response.displayedItemTypes=e.displayedItemTypes.map((function(e){return{ItemType:e.ItemType}}))}return e.prototype.getTabFromType=function(e){if(e.ItemType===r.c.Service)return{ItemType:r.c.Service,TabName:"Services",ItemName:"service",Items:this.selectItemsDialogService.getServices(e.SelectedIDs,e.SelectedCategories)};if(e.ItemType===r.c.Product)return{ItemType:r.c.Product,TabName:"Products",ItemName:"product",Items:this.selectItemsDialogService.getProducts(e.SelectedIDs,e.SelectedCategories)};throw new Error("Not Implemented")},e.prototype.getSelectItemsOptions=function(e){return{hideSearch:!1,hideSelectedCount:!1,categoryPageSize:25,itemPageSize:150,itemTypeName:e.ItemName}},e.prototype.selectedItemsUpdated=function(e,t){var i=this.response.displayedItemTypes.find((function(e){return e.ItemType===t.ItemType}));i.SelectedCategories=this.getSelectedCategories(e).map((function(e){return e.name}));var n=this.getIndeterminateCategories(e),r=[].concat.apply([],n.map((function(e){return e.items})));i.SelectedItems=r.filter((function(e){return e.isChecked})).map((function(e){return{ID:e.id,Name:e.name}}))},e.prototype.getSelectedCategories=function(e){return e.filter((function(e){return e.items.every((function(e){return e.isChecked}))}))},e.prototype.getIndeterminateCategories=function(e){return e.filter((function(e){return!e.items.every((function(e){return e.isChecked}))}))},e.prototype.onSelectClick=function(){this.dialogRef.close(this.response.displayedItemTypes)},e.prototype.onCancelClick=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(a.Pb(n.a),a.Pb(n.i),a.Pb(o.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["ng-component"]],decls:12,vars:2,consts:[[1,"select-items-dialog"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"tab-container"],[3,"label",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["qa","dialog-cancel-btn","mat-raised-button","",3,"click"],["qa","dialog-select-btn","mat-raised-button","","color","primary",3,"mat-dialog-close","click"],[3,"label"],[3,"items","options","itemsChange"]],template:function(e,t){1&e&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Vc(2,"Select Items"),a.Ub(),a.Vb(3,"div",2),a.Vb(4,"div",3),a.Vb(5,"mat-tab-group"),a.Tc(6,f,3,5,"mat-tab",4),a.Ub(),a.Ub(),a.Ub(),a.Vb(7,"div",5),a.Vb(8,"button",6),a.ec("click",(function(){return t.onCancelClick()})),a.Vc(9,"Cancel"),a.Ub(),a.Vb(10,"button",7),a.ec("click",(function(){return t.onSelectClick()})),a.Vc(11," Select "),a.Ub(),a.Ub(),a.Ub()),2&e&&(a.Cb(6),a.qc("ngForOf",t.tabs),a.Cb(4),a.qc("mat-dialog-close",!0))},directives:[n.j,n.g,c.c,s.s,n.c,u.b,l.b,n.d,c.a,p.a],pipes:[s.b],styles:[".select-items-dialog{padding:20px 0}  .select-items-dialog .mat-dialog-title{margin:0 24px 10px;font-size:20px;font-weight:700;line-height:1.35;color:#222}  .select-items-dialog .mat-dialog-content{border-bottom:1px solid #cdcdcd;padding:0 24px;margin:0}  .select-items-dialog .mat-dialog-content .mat-tab-header .mat-tab-label{font-size:14px}  .select-items-dialog .mat-dialog-content select-items{height:424px;display:block}  .select-items-dialog .mat-dialog-actions{padding:16px;float:right}  .select-items-dialog .mat-dialog-actions .mat-raised-button{margin-left:16px}  #selectItemsDialog{padding:0}"]}),e}()},IJN2:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("fXoL"),r=i("3Pt+"),o=i("LRne"),a=i("PqYM"),c=i("vkgz"),s=i("eIep"),u=i("lJxs"),l=function(){function e(){this.validateInput=new n.o}return e.prototype.validate=function(e){var t=this;if(e.value&&this.originalValue instanceof Array){var i=!0;if(this.originalValue.forEach((function(t,n){e.value[n]&&(e.value[n]=e.value[n].trim().toLowerCase()),e.value[n]!==(t?t.toLowerCase():t)&&(i=!1)})),i)return Object(o.a)(null)}else if(!e.value||e.value.trim()===this.originalValue)return Object(o.a)(null);return Object(a.a)(500).pipe(Object(c.a)((function(){t.validateInput.emit(!0)})),Object(s.a)((function(){return t.validatorService[t.validatorServiceName](t.originalValue instanceof Array?e.value:e.value.trim()).pipe(Object(u.a)((function(e){return t.validateInput.emit(!1),e.isInUse?{inUseId:e}:null})))})))},e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.Kb({type:e,selectors:[["","validator",""]],inputs:{originalValue:["validator","originalValue"],validatorService:"validatorService",validatorServiceName:"validatorServiceName"},outputs:{validateInput:"validateInput"},features:[n.Bb([{provide:r.r,useExisting:e,multi:!0}])]}),e}()},ZANJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e[e["Services Only"]=1]="Services Only",e[e["Entire Ticket"]=2]="Entire Ticket",e}({})},asXu:function(e,t,i){"use strict";i.d(t,"b",(function(){return w})),i.d(t,"a",(function(){return E})),i.d(t,"c",(function(){return O}));var n=i("p20J"),r=i("Coov"),o=i("bHgB"),a=i("hjtF"),c=i("k59a"),s=i("zi3Y"),u=i("vYTg"),l=i("vOC8"),p=i("2Vo4"),f=i("Cfvw"),d=i("lJxs"),v=i("SxV6"),m=i("+K2F"),h=i("hwCn"),y=i("rTmN"),g=i("fXoL"),b=i("0IaG"),S=function(){return(S=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},I=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function a(e){try{s(n.next(e))}catch(t){o(t)}}function c(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,c)}s((n=n.apply(e,t||[])).next())}))},C=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(c){o=[6,c],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},A=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,c=o.length;a<c;a++,r++)n[r]=o[a];return n},w=function(e){return e[e.Active=0]="Active",e[e.Inactive=1]="Inactive",e[e.All=2]="All",e}({}),E=function(e){return e.id="ID",e.name="Name",e.type="PetServiceType",e.category="Category",e.time="Time",e.price="Price",e}({}),L={serviceList:{filter:{searchString:"",activeFilter:w.Active,orderByColumn:E.id,descending:!1,startIndex:0,maxResults:50},list:[],totalCount:0,loading:!1,error:!1}},O=function(){function e(e,t,i,n,r,o,a){this.permissionService=e,this.featureService=t,this.serviceApiService=i,this.employeeApiService=n,this.appointmentApiService=r,this.snackBar=o,this.dialog=a,this.serviceState=L,this._serviceStateUpdate=new p.a(L)}return e.prototype.setTitle=function(e){this.serviceState.title=e},e.prototype.getTitle=function(){return this.serviceState.title},e.prototype.updateList=function(e){var t,i=this;void 0===e&&(e={});for(var n=S({},this.serviceState.serviceList.filter),r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];n=S(S({},n),((t={})[a]=e[a],t))}return this.serviceState.serviceList=S(S({},this.serviceState.serviceList),{filter:n,list:0===n.startIndex?[]:this.serviceState.serviceList.list,loading:!0}),n.petServiceTypeList=this.setPetServiceTypeList(),this._serviceStateUpdate.next(this.serviceState),this.serviceApiService.getServiceList(n).then((function(e){i.serviceState=S(S({},i.serviceState),{serviceList:{filter:n,list:A(i.serviceState.serviceList.list,e.entities),totalCount:e.totalCount,loading:!1,error:!1}}),i._serviceStateUpdate.next(i.serviceState)})).catch((function(e){i.snackBar.open(e,"",{duration:5e3}),i.serviceState=S(S({},i.serviceState),{serviceList:{filter:n,list:[],totalCount:0,loading:!1,error:!0}}),i._serviceStateUpdate.next(i.serviceState)}))},e.prototype.listIsLoading=function(){return this._serviceStateUpdate.asObservable().pipe(Object(d.a)((function(e){return{initial:0===e.serviceList.filter.startIndex,loading:e.serviceList.loading,error:e.serviceList.error}})))},e.prototype.listFilterInitialized=function(){return this._serviceStateUpdate.asObservable().pipe(Object(v.a)(),Object(d.a)((function(e){return{totalCount:e.serviceList.totalCount,searchString:e.serviceList.filter.searchString,status:e.serviceList.filter.activeFilter}})))},e.prototype.listUpdated=function(){return this._serviceStateUpdate.asObservable().pipe(Object(d.a)((function(e){return new l.a({entities:e.serviceList.list,totalCount:e.serviceList.totalCount,startIndex:e.serviceList.filter.startIndex})})))},e.prototype.getNextPage=function(){var e=this.serviceState.serviceList.filter.startIndex+this.serviceState.serviceList.filter.maxResults;e<=this.serviceState.serviceList.totalCount-1&&this.updateList({startIndex:e})},e.prototype.getCategoryList=function(){return I(this,void 0,void 0,(function(){var e,t;return C(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),e=m.a.bind,t={},[4,this.serviceApiService.getCategoryList()];case 1:return[2,new(e.apply(m.a,[void 0,(t.data=i.sent(),t.error=!1,t)]))];case 2:return i.sent(),[2,new m.a({error:!0})];case 3:return[2]}}))}))},e.prototype.getAppointmentColorList=function(){return this.appointmentApiService.getAppointmentColorList().then((function(e){return new m.a({data:e,error:!1})})).catch((function(e){return new m.a({error:!0})}))},e.prototype.getService=function(e,t){return void 0===t&&(t=!1),I(this,void 0,void 0,(function(){var i,n;return C(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),i=m.a.bind,n={},[4,this.serviceApiService.getService(e,t)];case 1:return[2,new(i.apply(m.a,[void 0,(n.data=r.sent(),n.error=!1,n)]))];case 2:return r.sent(),[2,new m.a({error:!0})];case 3:return[2]}}))}))},e.prototype.addService=function(e){return I(this,void 0,void 0,(function(){var t;return C(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.serviceApiService.addService(e)];case 1:return t=i.sent(),this.updateList({startIndex:0}),this.snackBar.open(t.name+" was successfully added.","",{duration:5e3}),[2,new m.a({data:t,error:!1})];case 2:return i.sent(),[2,new m.a({error:!0})];case 3:return[2]}}))}))},e.prototype.updateService=function(e){return I(this,void 0,void 0,(function(){var t,i;return C(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.serviceApiService.updateService(e)];case 1:return t=n.sent(),this.updateList({startIndex:0}),this.snackBar.open(t.name+" was successfully updated.","",{duration:5e3}),[2,new m.a({data:t,error:!1})];case 2:return(i=n.sent()).StatusCode===m.b.ResourceInUse?[2,new m.a({error:i,errorCode:m.b.ResourceInUse,errorData:JSON.parse(i.MoreInfo)})]:[2,new m.a({error:i,errorData:i})];case 3:return[2]}}))}))},e.prototype.startDeleteProcess=function(e){return I(this,void 0,void 0,(function(){var t=this;return C(this,(function(i){return[2,this.dialog.open(h.a,{data:{id:e.id,title:"Delete Service",content:"Are you sure you want to delete service "+e.name+"?",yesText:"Delete",itemDeletedTitle:"Service Deleted",itemDeletedContent:e.name+" was successfully deleted.",itemInactiveTitle:"Service marked Inactive",itemInactiveContent:e.name+" can't be deleted because it's on a ticket. It was marked as inactive instead.",failTitle:"Something went wrong",failContent:"We were unable to delete service.<br>Please try again.",yesFn:function(e){return t.delete(e)},yesFnArgs:[e]},panelClass:"posonline-discard-draft-dialog"}).afterClosed().toPromise()]}))}))},e.prototype.delete=function(e){var t=this;return this.serviceApiService.deleteService(e.id).then((function(e){return t.updateList({startIndex:0}),new m.a({data:e,error:!1})})).catch((function(e){return new m.a({error:!0})}))},e.prototype.setPetServiceTypeList=function(){var e=this.featureService.getFeatureFlag(y.a.PetDaycare),t=this.permissionService.hasFeaturePermission(r.b.PetDaycare)&&this.permissionService.isFeatureActive(r.b.PetDaycare),i=this.permissionService.hasFeaturePermission(r.b.PetGrooming)&&this.permissionService.isFeatureActive(r.b.PetGrooming);return e&&t&&i?[u.a.NOT_SET,u.a.GROOMING,u.a.DAYCARE]:e&&!i&&t?[u.a.DAYCARE]:[u.a.NOT_SET,u.a.GROOMING]},e.prototype.checkDeletePermission=function(){var e=this.permissionService.hasEmployeePermission(r.a.ServiceDelete);return e||this.snackBar.open("You do not have permission to delete a service.","",{duration:5e3}),e},e.prototype.getEmployees=function(){return this.employeeApiService.getAllActiveEmployeeList().then((function(e){return e})).catch((function(e){return new m.a({error:!0})}))},e.prototype.isServiceIdUsed=function(e){return Object(f.a)(this.serviceApiService.isIdUsed(e).then((function(e){return new m.a({data:e,error:!1})})).catch((function(e){return new m.a({error:!0})})))},e.prototype.setFavorite=function(e,t){return I(this,void 0,void 0,(function(){var i,n;return C(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),i=m.a.bind,n={},[4,this.serviceApiService.setFavorite(e,t)];case 1:return[2,new(i.apply(m.a,[void 0,(n.data=r.sent(),n.error=!1,n)]))];case 2:return r.sent(),[2,new m.a({error:!0})];case 3:return[2]}}))}))},e.prototype.getApiErrorDialog=function(e){return void 0===e&&(e={}),I(this,void 0,void 0,(function(){return C(this,(function(t){switch(t.label){case 0:return[4,this.dialog.open(s.a,{data:{errorState:!0,failTitle:"Something went wrong.",failContent:e.customContent?e.customContent:"We were unable to "+e.action+" service.<br>Please try again."},panelClass:"posonline-error-state-dialog"}).afterClosed().toPromise()];case 1:return[2,t.sent()]}}))}))},e.\u0275fac=function(t){return new(t||e)(g.ac(r.c),g.ac(y.b),g.ac(o.a),g.ac(c.a),g.ac(a.a),g.ac(n.a),g.ac(b.b))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac}),e}()},iRjF:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e){return e[e.PAXA920=1]="PAXA920",e}({}),r=function(e){return e[e["PAX A920"]=1]="PAX A920",e}({})},le05:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fXoL"),r=function(){function e(){}return e.prototype.transform=function(e,t){return t&&(null==e?void 0:e.length)>0?(e=e.match(new RegExp(".{1,4}","g")).join("-")).toUpperCase():e},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Ob({name:"giftCardIDPipe",type:e,pure:!0}),e}()},ye6N:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n,r=i("K4Bh"),o=i("pv6H"),a=i("LRne"),c=i("Cfvw"),s=i("suC+"),u=i("k59a"),l=i("lJxs"),p=i("pLZG"),f=function(){return function(e,t){this.name=e,this.items=t}}(),d=i("vYTg"),v=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),m=function(e){function t(t){var i=e.call(this,t)||this;return i.isVisible=!0,i}return v(t,e),t}(d.b),h=i("Egi3"),y=i("rTmN"),g=i("fXoL"),b=function(){return(b=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},S=function(){function e(e,t,i,n,r){this.httpClient=e,this.cache=t,this.localDb=i,this.api=n,this.featureService=r}return e.prototype.addNew=function(e){var t=this;return e.ServiceLimitations=this.serializeServiceLimitations(e.ServiceLimitations,e.Employee.EmployeeID),this.httpClient.post("/Employee/AddEmployee",e).then((function(i){return t.localDb.remove(s.a.employee,"list"),t.updateRoleCache(e.Employee.Role),i}))},e.prototype.updateRoleCache=function(e){var t=this.cache.get("EmployeeRoleList"),i=e,n=[];t.toPromise().then((function(e){e.forEach((function(e){n.push(e.Item)}))})),-1===n.indexOf(i)&&this.cache.remove("EmployeeRoleList")},e.prototype.update=function(e){var t=this;return e.ServiceLimitations=this.serializeServiceLimitations(e.ServiceLimitations,e.Employee.EmployeeID),this.httpClient.post("/Employee/UpdateEmployee",e).then((function(i){return t.localDb.remove(s.a.employee,"list"),t.updateRoleCache(e.Employee.Role),i}))},e.prototype.serializeServiceLimitations=function(e,t){return(e||[]).map((function(e){return{Value:e.limitedObjectID,TypeValue:e.type,EmployeeID:t}}))},e.prototype.getDetail=function(e){return this.httpClient.post("/Employee/GetEmployee",{EmployeeID:e}).then((function(e){return e.Employee}),(function(e){return["fail"]}))},e.prototype.resendActivationEmail=function(e){var t=this;return this.httpClient.post("/DaySmartAccount/ResendOnlineAccountActivation",{email:e}).then((function(e){return t.localDb.remove(s.a.employee,"list"),e.StatusMessage}),(function(e){return["fail"]}))},e.prototype.isNameInUse=function(e){return void 0===e&&(e=[]),e.length<2||!e[0]||!e[1]?Object(a.a)(!1):Object(c.a)(this.httpClient.post("/Employee/NameInUse",{FirstName:e[0],LastName:e[1]}).then((function(e){return{isInUse:e.NameInUse}}),(function(e){return["fail"]})))},e.prototype.isOnlineEmailInUse=function(e){return Object(c.a)(this.httpClient.post("/DaySmartAccount/GetOnlineAccountEmailInUse",{email:e}).then((function(e){return{isInUse:e.EmailIsInUse&&e.NeedsToMoveAccount,customerId:e.EmailIsInUse?e.AccountUsingEmail.CustomerID:null}}),(function(e){return["fail"]})))},e.prototype.moveAccount=function(e,t,i){var n=this;return(this.featureService.getFeatureFlag(y.a.OptionalCloudAccount)?this.httpClient.post("/DaySmartAccount/MoveOnlineAccount",{contactEmail:e,password:t,loginEmail:i},{endpointVersion:"2"}):this.httpClient.post("/DaySmartAccount/MoveOnlineAccount",{email:e,password:t})).then((function(e){return n.localDb.remove(s.a.employee,"list"),{success:0===e.StatusCode,statusMessage:e.StatusMessage}}))},e.prototype.activateAccount=function(e,t,i,n){var r=this;return(this.featureService.getFeatureFlag(y.a.OptionalCloudAccount)?this.httpClient.post("/DaySmartAccount/ActivateOnlineAccount",{ContactEmail:e,EmployeeID:t,AdminUser:i,LoginEmail:n},{endpointVersion:"2"}):this.httpClient.post("/DaySmartAccount/ActivateOnlineAccount",{Email:e})).then((function(e){return r.localDb.remove(s.a.employee,"list"),e.DaysmartAccount}),(function(e){return["fail"]}))},e.prototype.updateActivationEmail=function(e,t){return this.httpClient.post("/DaySmartAccount/UpdateOnlineAccountEmail",{oldEmail:e,newEmail:t}).then((function(e){return e}),(function(e){return["fail"]}))},e.prototype.deactivateAccount=function(e,t,i){var n=this;return(this.featureService.getFeatureFlag(y.a.OptionalCloudAccount)?this.httpClient.post("/DaySmartAccount/DeactivateOnlineAccount",{Email:e,CreatePhantomAccount:t,EmployeeID:i},{endpointVersion:"2"}):this.httpClient.post("/DaySmartAccount/DeactivateOnlineAccount",{Email:e})).then((function(e){return n.localDb.remove(s.a.employee,"list"),e.DaysmartAccount}),(function(e){return["fail"]}))},e.prototype.sendActivationEmail=function(e){var t=this;return console.warn("sendActivationEmail is deprecated. Call activateAccount instead."),this.httpClient.post("/DaySmartAccount/CreateOnlineAccount",e).then((function(e){return t.localDb.remove(s.a.employee,"list"),e.DaysmartAccount}),(function(e){return["fail"]}))},e.prototype.getEmployeeServiceLimitations=function(e,t){var i=this;return this.api.getEmployeeServiceLimitations(e,t).pipe(Object(l.a)((function(e){if(!e||e.error)throw new Error(e&&e.statusMessage?e.statusMessage:"Failed to get service limitations. Please try again.");return i.buildEmployeeServiceLimitationsResponse(e.data)})))},e.prototype.buildEmployeeServiceLimitationsResponse=function(e){var t=[];if(e.activeServiceList.length>0){var i=[];e.activeServiceList.forEach((function(e){e.category||(e.category="Category Not Set"),-1===i.indexOf(e.category)&&(i.push(e.category),t.push(new f(e.category,[])))})),t.sort((function(e,t){var i=e.name.toUpperCase(),n=t.name.toUpperCase();return i<n?-1:i>n?1:0})).forEach((function(t){e.activeServiceList.forEach((function(e){e.category&&e.category===t.name&&t.items.push(new m(b(b({},e),{isChecked:!1})))}))})),e.employeeLimitations.length>0&&t.forEach((function(t){var i=e.employeeLimitations.findIndex((function(e){return e.type===h.b.Category&&e.limitedObjectID===t.name}));t.items.forEach(i>=0?function(e){e.isChecked=!0}:function(t){var i=e.employeeLimitations.findIndex((function(e){return e.type===h.b.Service&&e.limitedObjectID===t.id}));t.isChecked=i>=0})}))}return t},e.prototype.getNextEmployeeCost=function(){return this.api.getNextEmployeeCost().pipe(Object(p.a)((function(e){return e&&e.data&&!e.error})),Object(l.a)((function(e){return e.data.nextEmployeeCost})))},e.\u0275fac=function(t){return new(t||e)(g.ac(r.a),g.ac(o.b),g.ac(s.b),g.ac(u.a),g.ac(y.b))},e.\u0275prov=g.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);