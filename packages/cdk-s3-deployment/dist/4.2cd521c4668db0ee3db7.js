(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"3fQp":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));var i=n("fXoL"),o=function(t){return t[t.Backscpace=8]="Backscpace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.Escape=27]="Escape",t[t.End=35]="End",t[t.Home=36]="Home",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Delete=46]="Delete",t[t.Num0=48]="Num0",t[t.Num1=49]="Num1",t[t.Num2=50]="Num2",t[t.Num3=51]="Num3",t[t.Num4=52]="Num4",t[t.Num5=53]="Num5",t[t.Num6=54]="Num6",t[t.Num7=55]="Num7",t[t.Num8=56]="Num8",t[t.Num9=57]="Num9",t[t.a=65]="a",t[t.b=66]="b",t[t.c=67]="c",t[t.d=68]="d",t[t.e=69]="e",t[t.f=70]="f",t[t.g=71]="g",t[t.h=72]="h",t[t.i=73]="i",t[t.j=74]="j",t[t.k=75]="k",t[t.l=76]="l",t[t.m=77]="m",t[t.n=78]="n",t[t.o=79]="o",t[t.p=80]="p",t[t.q=81]="q",t[t.r=82]="r",t[t.s=83]="s",t[t.t=84]="t",t[t.u=85]="u",t[t.v=86]="v",t[t.w=87]="w",t[t.x=88]="x",t[t.y=89]="y",t[t.z=90]="z",t[t.NumPad0=96]="NumPad0",t[t.NumPad1=97]="NumPad1",t[t.NumPad2=98]="NumPad2",t[t.NumPad3=99]="NumPad3",t[t.NumPad4=100]="NumPad4",t[t.NumPad5=101]="NumPad5",t[t.NumPad6=102]="NumPad6",t[t.NumPad7=103]="NumPad7",t[t.NumPad8=104]="NumPad8",t[t.NumPad9=105]="NumPad9",t}({}),r=function(){function t(){}return t.prototype.onkeydown=function(t){var e=t,n=e.keyCode;-1!==[o.Delete,o.Backscpace,o.Tab,o.Escape].indexOf(n)||n===o.a&&(e.ctrlKey||e.metaKey)||n===o.c&&(e.ctrlKey||e.metaKey)||n===o.v&&(e.ctrlKey||e.metaKey)||n===o.x&&(e.ctrlKey||e.metaKey)||n>=o.End&&n<=o.RightArrow||(e.shiftKey||n<o.Num0||n>o.Num9)&&(n<o.NumPad0||n>o.NumPad9)&&e.preventDefault()},t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Kb({type:t,selectors:[["","onlyNumber",""]],hostBindings:function(t,e){1&t&&i.ec("keydown",(function(t){return e.onkeydown(t)}))}}),t}()},"7uSY":function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var i=n("fXoL"),o=n("/1cH"),r=n("p20J"),c=n("wCJe"),s=n("XNiG"),a=n("1G5W"),l=n("JX91"),u=n("lJxs"),p=n("LvDl"),d=n("0IaG"),m=n("kmnG"),f=n("3Pt+"),h=n("ofXK"),g=n("qFsG"),b=n("ccMj"),v=n("FKr1"),C=n("Xa2L"),y=n("NFeN"),w=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function c(t){try{a(i.next(t))}catch(e){r(e)}}function s(t){try{a(i.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}a((i=i.apply(t,e||[])).next())}))},O=function(t,e){var n,i,o,r,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){c.label=r[1];break}if(6===r[0]&&c.label<o[1]){c.label=o[1],o=r;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(r);break}o[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},P=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,o++)i[o]=r[c];return i},S=["autoDropdownOptionInput"];function I(t,e){1&t&&i.Qb(0,"mat-spinner",9),2&t&&i.qc("diameter",24)("strokeWidth",3)}function x(t,e){if(1&t){var n=i.Wb();i.Vb(0,"span",10),i.ec("click",(function(t){i.Hc(n);var e=i.ic();return t.stopPropagation(),e.clearSearch()})),i.Vb(1,"mat-icon",11),i.Vc(2,"close"),i.Ub(),i.Ub()}if(2&t){var o=i.ic();i.sc("qa","clear-",o.formControlString,"")}}function L(t,e){if(1&t&&(i.Vb(0,"span"),i.Vc(1),i.Ub()),2&t){var n=i.ic().$implicit;i.Cb(1),i.Wc(n.name)}}var k=function(t){return{error:t}};function T(t,e){if(1&t){var n=i.Wb();i.Vb(0,"span"),i.Vb(1,"mat-form-field"),i.Vb(2,"input",17),i.ec("change",(function(t){return i.Hc(n),i.ic(2).dropdownOptionNameEdit=t.target.value}))("click",(function(t){return i.Hc(n),t.stopPropagation()}))("keyup.enter",(function(t){return i.Hc(n),t.stopPropagation()}))("keydown.enter",(function(t){i.Hc(n);var e=i.ic().$implicit,o=i.ic();return t.stopPropagation(),o.saveDropdownOption(e,t.target.value)}))("keydown.esc",(function(t){return i.Hc(n),t.stopPropagation()}))("keyup.esc",(function(t){return i.Hc(n),t.stopPropagation()}))("keydown.space",(function(t){return i.Hc(n),t.stopPropagation()})),i.Ub(),i.Ub(),i.Ub()}if(2&t){var o=i.ic().$implicit,r=i.ic();i.Cb(2),i.sc("qa","",r.formControlString,"-edit"),i.qc("ngClass",i.wc(3,k,o._isError))("value",r.dropdownOptionNameEdit)}}function _(t,e){if(1&t){var n=i.Wb();i.Vb(0,"i",23),i.ec("click",(function(t){i.Hc(n);var e=i.ic(2).$implicit,o=i.ic();return t.stopPropagation(),o.saveDropdownOption(e,o.dropdownOptionNameEdit)})),i.Vc(1,"check_circle_outline"),i.Ub()}}function V(t,e){if(1&t){var n=i.Wb();i.Vb(0,"i",24),i.ec("click",(function(t){i.Hc(n);var e=i.ic(2).$implicit,o=i.ic();return t.stopPropagation(),o.editDropdownOption(e)})),i.Vc(1,"edit"),i.Ub()}if(2&t){var o=i.ic(3);i.sc("qa","edit-",o.formControlString,"")}}function F(t,e){if(1&t){var n=i.Wb();i.Vb(0,"i",25),i.ec("click",(function(t){i.Hc(n);var e=i.ic(2).$implicit,o=i.ic();return t.stopPropagation(),o.deleteDropdownOption(e)})),i.Vc(1,"delete_forever"),i.Ub()}if(2&t){var o=i.ic(3);i.sc("qa","delete-",o.formControlString,"")}}function M(t,e){1&t&&i.Qb(0,"mat-spinner",26),2&t&&i.qc("diameter",24)("strokeWidth",3)}var q=function(t){return{disabled:t}};function D(t,e){if(1&t&&(i.Vb(0,"span",18),i.Tc(1,_,2,0,"i",19),i.Tc(2,V,2,1,"i",20),i.Tc(3,F,2,1,"i",21),i.Tc(4,M,1,2,"mat-spinner",22),i.Ub()),2&t){var n=i.ic().$implicit,o=i.ic();i.qc("ngClass",i.wc(5,q,o.isDropdownOptionSaving)),i.Cb(1),i.qc("ngIf",n._isEdit&&!n._isDeleting&&!n._isSaving),i.Cb(1),i.qc("ngIf",!n._isEdit&&!n._isDeleting&&!n._isSaving),i.Cb(1),i.qc("ngIf",!n._isDeleting&&!n._isSaving),i.Cb(1),i.qc("ngIf",n._isDeleting||n._isSaving)}}function E(t,e){if(1&t){var n=i.Wb();i.Vb(0,"mat-option",12),i.ec("keyup.enter",(function(t){return i.Hc(n),t.stopPropagation()}))("keydown.enter",(function(t){return i.Hc(n),t.stopPropagation()}))("click",(function(){return i.Hc(n),i.ic().onDropdownOptionSelected()})),i.jc(1,"lowercase"),i.Vb(2,"div",13),i.Vb(3,"span",14),i.Tc(4,L,2,1,"span",15),i.Tc(5,T,3,5,"span",15),i.Ub(),i.Tc(6,D,5,7,"span",16),i.Ub(),i.Ub()}if(2&t){var o=e.$implicit,r=i.ic();i.sc("qa","",i.kc(1,6,o.name),"-option"),i.qc("value",o)("disabled",r.isSaving||r.isDisabled),i.Cb(4),i.qc("ngIf",!o._isEdit),i.Cb(1),i.qc("ngIf",o._isEdit),i.Cb(1),i.qc("ngIf",!!o.name.trim())}}var N=function(){function t(t,e){this.snackBar=t,this.dialog=e,this.validateAdding=!0,this.validateWithoutTouch=!1,this.showLoadingWheelForAdding=!0,this.modelListChange=new i.o,this.optionCleared=new i.o,this.customDropdownOption={id:-1,name:"",_isDeleting:!1,_isSaving:!1,_isEdit:!1,_isError:!1},this.isDropdownOptionSaving=!1,this.ngUnsubscribe=new s.a,this.isAdding=!1}return Object.defineProperty(t.prototype,"modelList",{get:function(){return this._modelList},set:function(t){this._modelList=t,this.form&&(this.listenToDropdownOptionInputChange(),this.dropdownOptionNameEdit=this.getSearchBarInputText)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.listenToDropdownOptionInputChange(),this.dropdownOptionNameEdit=this.getSearchBarInputText},t.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.prototype.displayDropdownOption=function(t){return t?t.name:""},t.prototype.deleteDropdownOption=function(t){return w(this,void 0,void 0,(function(){var e;return O(this,(function(n){switch(n.label){case 0:return this.isDropdownOptionSaving?[2]:(t._isEdit=!1,t.id?(this.hideSpinner||(t._isDeleting=!0),this.isDropdownOptionSaving=!0,[4,this.deleteFunction(t)]):[3,2]);case 1:e=n.sent(),this.isDropdownOptionSaving=!1,t._isDeleting=!1,n.label=2;case 2:return null!==e&&(e&&e.error?400===e.httpStatus&&this.dialog.open(c.a,{data:{title:"Unable to Delete!",content:e.statusMessage?e.statusMessage:'Option "'+t.name+"\" cannot be deleted because it's in use.",hideNoBtn:!0,yesText:"OK"},panelClass:"posonline-discard-draft-dialog"}):(this.modelList=this.modelList.filter((function(e){return e.name!==t.name})),this.modelListFull&&(this.modelListFull=this.modelListFull.filter((function(e){return e.name!==t.name}))),this.emitModelListChange(),this.exitEditModeForAll(),this.autoDropdownOptionInput.openPanel(),this._refreshFilteredList())),this.isDropdownOptionSaving=!1,this.resetInput(),[2]}}))}))},t.prototype.editDropdownOption=function(t){return w(this,void 0,void 0,(function(){var e;return O(this,(function(n){switch(n.label){case 0:return this.isDropdownOptionSaving?[2]:this.editFunction?[4,this.editFunction(t)]:[3,2];case 1:return(e=n.sent())&&(this.modelList=this.modelList.map((function(n){return n.id===t.id?e:n})),this.modelListFull&&(this.modelListFull=this.modelListFull.map((function(n){return n.id===t.id?e:n}))),this._afterOptionChange(e)),[3,3];case 2:this.exitEditModeForAll(),t._isEdit=!0,t._isError=!1,this.dropdownOptionNameEdit=t.name,n.label=3;case 3:return[2]}}))}))},t.prototype.saveDropdownOption=function(t,e){return w(this,void 0,void 0,(function(){var n,i,o;return O(this,(function(r){switch(r.label){case 0:return this.isDropdownOptionSaving?[2]:(n=!0,this.saveFunction?((i=Object(p.cloneDeep)(t)).name=e.trim(),this.hideSpinner||(t._isSaving=!0),this.isDropdownOptionSaving=!0,[4,this.saveFunction(i)]):[3,2]);case 1:if(n=r.sent(),this.isDropdownOptionSaving=!1,t._isSaving=!1,!n)return t._isError=!0,[2];r.label=2;case 2:return e&&e.trim()?(e=e.trim(),this.modelList.find((function(t){return t.name===e}))&&t.name!==e?(t._isError=!0,this.snackBar.open('"'+e+'" already exists'),[2]):(t._isError=!1,t._isEdit=!1,(o=this.modelList.find((function(e){return e.id===t.id}))).name===this.getSearchBarInputText?(this.autoDropdownOptionInput.writeValue(e),o.name=e,this.form.get(this.formControlString).patchValue(o),this.autoDropdownOptionInput.openPanel()):o.name=e,this.sortModelList(),this.emitModelListChange(),[2])):(t._isEdit=!1,[2])}}))}))},t.prototype.exitEditModeForAll=function(){this.modelList.forEach((function(t){return t._isEdit=!1}))},t.prototype.dropdownOptionSelected=function(t){return w(this,void 0,void 0,(function(){var e;return O(this,(function(n){switch(n.label){case 0:return t instanceof Object?(t._isEdit=!1,-1!==t.id||this.modelList.find((function(e){return e.name===t.name}))?[3,4]:(e=null,this.addFunction?(this.isAdding=this.showLoadingWheelForAdding,[4,this.addFunction(t)]):[3,2])):[3,4];case 1:return e=n.sent(),this.isAdding=!1,e?[3,3]:(this.validateAdding&&this.form.get(this.formControlString).setErrors({invalid:!0}),[2,!1]);case 2:e={id:null,name:t.name,_isSaving:!1,_isDeleting:!1,_isEdit:!1,_isError:!1},n.label=3;case 3:e&&(this.modelList=P(this.modelList,[e]),this.modelListFull&&(this.modelListFull=P(this.modelListFull,[e])),this._afterOptionChange(e)),n.label=4;case 4:return[2]}}))}))},t.prototype.onDropdownOptionInputBlur=function(){var t=this;setTimeout((function(){return t.validateSelection()}),200)},t.prototype.clearSearch=function(){this.displayFullUnfilteredList(),this.resetInput()},t.prototype.resetInput=function(){this.form.get(this.formControlString).patchValue(""),this.autoDropdownOptionInput.writeValue(""),this.optionCleared.next()},t.prototype.onDropdownOptionSelected=function(){this.displayFullUnfilteredList()},t.prototype.onDropdownCustomClosed=function(){this.exitEditModeForAll(),this.validateSelection()},t.prototype.listenToDropdownOptionInputChange=function(){var t=this;if(this.modelList&&this.form){var e=this.form.get(this.formControlString).value;e&&e.name&&(this.customDropdownOption.name=e.name),this.form.get(this.formControlString).valueChanges.pipe(Object(a.a)(this.ngUnsubscribe),Object(l.a)(""),Object(u.a)((function(e){return e?t._filter(e):t.modelList.slice()}))).subscribe((function(e){t.form.controls[t.formControlString].dirty||!t.modelList?(t.filteredDropdownOptions=e,t.form.get(t.formControlString).setErrors(null)):t.displayFullUnfilteredList()}))}},t.prototype.validateSelection=function(){var t=this.form.get(this.formControlString).value;if(!t)return!0;if(t instanceof Object)return!0;if(!t.trim())return this.form.get(this.formControlString).patchValue(""),!0;var e=this.modelList.find((function(e){return e.name.toLocaleLowerCase()===t.toLocaleLowerCase()}));return e?(this.form.get(this.formControlString).patchValue(e),!0):(this.validateAdding&&this.form.get(this.formControlString).setErrors({invalid:!0}),!1)},t.prototype._refreshFilteredList=function(){var t=this.getSearchBarInputText,e=this.modelList.find((function(e){return e.name===t}));this.form.get(this.formControlString).patchValue(""),this.autoDropdownOptionInput.writeValue(""),this.form.get(this.formControlString).patchValue(e||t),this.autoDropdownOptionInput.writeValue(e||t)},t.prototype._filter=function(t){var e;return t instanceof Object?(e=t.name.toLowerCase(),this.customDropdownOption.name=t.name):(e=t.toLowerCase(),this.customDropdownOption.name=t),this.modelList.filter((function(t){return t.name.toLowerCase().includes(e)}))},t.prototype.sortByName=function(t){return t.sort((function(t,e){var n=t.name.toUpperCase(),i=e.name.toUpperCase();return n<i?-1:n>i?1:0}))},t.prototype.sortModelList=function(){this.modelListFull?(this.modelListFull=this.sortByName(this.modelListFull),this.modelList=this.sortByName(this.modelList)):this.modelList=this.sortByName(this.modelList)},t.prototype.emitModelListChange=function(){this.modelListChange.emit(this.modelListFull?this.modelListFull:this.modelList)},t.prototype._afterOptionChange=function(t){this.sortModelList(),this.emitModelListChange(),this._refreshFilteredList(),this.autoDropdownOptionInput.writeValue(t)},Object.defineProperty(t.prototype,"getSearchBarInputText",{get:function(){var t=this.form.get(this.formControlString).value,e="";return(e=t instanceof Object?t.name:t)&&e.trim()?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCustomDropdownOptionLink",{get:function(){var t=this;return!(!this.modelList||!this.getSearchBarInputText||this.modelList.find((function(e){return e.name.toLocaleLowerCase()===t.getSearchBarInputText.toLocaleLowerCase()})))},enumerable:!1,configurable:!0}),t.prototype.displayFullUnfilteredList=function(){this.filteredDropdownOptions=this.modelList},t.\u0275fac=function(e){return new(e||t)(i.Pb(r.a),i.Pb(d.b))},t.\u0275cmp=i.Jb({type:t,selectors:[["dropdown-custom-component"]],viewQuery:function(t,e){var n;1&t&&i.Oc(S,!0,o.d),2&t&&i.Cc(n=i.fc())&&(e.autoDropdownOptionInput=n.first)},inputs:{isSaving:"isSaving",isDisabled:"isDisabled",form:"form",formControlString:"formControlString",addFunction:"addFunction",deleteFunction:"deleteFunction",hideSpinner:"hideSpinner",editFunction:"editFunction",saveFunction:"saveFunction",validateAdding:"validateAdding",validateWithoutTouch:"validateWithoutTouch",showLoadingWheelForAdding:"showLoadingWheelForAdding",modelListFull:"modelListFull",modelList:"modelList"},outputs:{modelListChange:"modelListChange",optionCleared:"optionCleared"},decls:10,vars:18,consts:[["floatLabel","never",1,"dropdown-option-search",3,"formGroup","ngClass"],["matInput","","type","text","maxlength","40",3,"formControlName","qa","matAutocomplete","readonly","placeholder","blur"],["autoDropdownOptionInput",""],["matSuffix","","color","primary",3,"diameter","strokeWidth",4,"ngIf"],["matSuffix","","aria-label","Clear","class","clear-btn",3,"qa","click",4,"ngIf"],[1,"dropdown-custom-autocomplete",3,"displayWith","disableRipple","optionSelected","closed"],["autoDropdownOption","matAutocomplete"],[1,"custom-dropdown-option",3,"disabled","value","qa","mousedown"],[3,"value","disabled","qa","keyup.enter","keydown.enter","click",4,"ngFor","ngForOf"],["matSuffix","","color","primary",3,"diameter","strokeWidth"],["matSuffix","","aria-label","Clear",1,"clear-btn",3,"qa","click"],[1,"btn-icon"],[3,"value","disabled","qa","keyup.enter","keydown.enter","click"],[1,"option-container"],[1,"option-name"],[4,"ngIf"],["class","option-actions",3,"ngClass",4,"ngIf"],["matInput","","type","text","autocomplete","off","maxlength","40",3,"ngClass","value","qa","change","click","keyup.enter","keydown.enter","keydown.esc","keyup.esc","keydown.space"],[1,"option-actions",3,"ngClass"],["class","material-icons btn-icon primary","qa","confirm-edit",3,"click",4,"ngIf"],["class","material-icons btn-icon primary",3,"qa","click",4,"ngIf"],["class","material-icons btn-icon primary delete-icon",3,"qa","click",4,"ngIf"],["color","primary",3,"diameter","strokeWidth",4,"ngIf"],["qa","confirm-edit",1,"material-icons","btn-icon","primary",3,"click"],[1,"material-icons","btn-icon","primary",3,"qa","click"],[1,"material-icons","btn-icon","primary","delete-icon",3,"qa","click"],["color","primary",3,"diameter","strokeWidth"]],template:function(t,e){if(1&t&&(i.Vb(0,"mat-form-field",0),i.Vb(1,"input",1,2),i.ec("blur",(function(){return e.onDropdownOptionInputBlur()})),i.Ub(),i.Tc(3,I,1,2,"mat-spinner",3),i.Tc(4,x,3,1,"span",4),i.Ub(),i.Vb(5,"mat-autocomplete",5,6),i.ec("optionSelected",(function(t){return e.dropdownOptionSelected(t.option.value)}))("closed",(function(){return e.onDropdownCustomClosed()})),i.Vb(7,"mat-option",7),i.ec("mousedown",(function(t){return t.preventDefault()})),i.Vc(8),i.Ub(),i.Tc(9,E,7,8,"mat-option",8),i.Ub()),2&t){var n=i.Dc(2),o=i.Dc(6);i.qc("formGroup",e.form)("ngClass",i.wc(16,k,e.form.get(e.formControlString).invalid&&(e.form.touched||e.validateWithoutTouch))),i.Cb(1),i.sc("qa","",e.formControlString,"-input"),i.sc("placeholder","Select a ",e.formControlString,""),i.qc("formControlName",e.formControlString)("matAutocomplete",o)("readonly",e.isSaving||e.isDisabled),i.Cb(2),i.qc("ngIf",e.isAdding),i.Cb(1),i.qc("ngIf",n.value&&!e.isAdding),i.Cb(1),i.qc("displayWith",e.displayDropdownOption)("disableRipple",!0),i.Cb(2),i.sc("qa","add-",e.formControlString,""),i.qc("disabled",!e.showCustomDropdownOptionLink)("value",e.customDropdownOption),i.Cb(1),i.Xc(" ",e.showCustomDropdownOptionLink?"+ Add "+e.formControlString+' "'+e.getSearchBarInputText+'"':"+ Type to add new "+e.formControlString," "),i.Cb(1),i.qc("ngForOf",e.filteredDropdownOptions)}},directives:[m.c,f.w,f.m,h.q,g.b,f.d,o.d,f.p,f.v,f.k,b.b,h.t,o.a,v.o,h.s,C.c,m.j,y.a],pipes:[h.p],styles:["mat-form-field.dropdown-option-search[_ngcontent-%COMP%]{width:290px}mat-form-field.dropdown-option-search[_ngcontent-%COMP%]     .mat-form-field-flex{display:flex;justify-content:center;align-items:center}mat-form-field.dropdown-option-search.error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:red!important}mat-form-field.dropdown-option-search.error[_ngcontent-%COMP%]     .mat-form-field-flex{border:1px solid red!important}mat-form-field.dropdown-option-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%], mat-form-field.dropdown-option-search[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:3px;font-size:18px!important;width:27px;height:27px;display:flex;justify-content:center}mat-form-field.dropdown-option-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{align-items:center}mat-form-field.dropdown-option-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-radius:50%}mat-form-field.dropdown-option-search[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:inherit!important;height:1em;line-height:1em}  .mat-form-field-suffix{top:0!important}mat-option.custom-dropdown-option[_ngcontent-%COMP%]{font-size:14px}  .dropdown-custom-autocomplete .option-container{display:flex;justify-content:space-between}  .dropdown-custom-autocomplete .option-container .option-name{height:48px;max-width:200px;text-overflow:ellipsis;overflow:hidden}  .dropdown-custom-autocomplete .option-container .option-name mat-form-field{margin-top:-10px}  .dropdown-custom-autocomplete .option-container .option-name mat-form-field input.error{color:#e74c3c}  .dropdown-custom-autocomplete .option-container .option-actions .delete-icon{margin-left:5px}  .dropdown-custom-autocomplete .option-container .option-actions.disabled i{opacity:.6;cursor:default}  .dropdown-custom-autocomplete .option-container .option-actions mat-spinner{margin-top:12px}  .cdk-overlay-pane{min-width:290px}"]}),t}()},"A+mZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var i=n("fXoL"),o=n("LvDl"),r=n("XNiG"),c=n("vYTg"),s=n("q1ro"),a=n("QKTh"),l=n("JX91"),u=n("Kj3r"),p=n("eIep"),d=n("Yi6c"),m=n("VFje"),f=n("qJDk"),h=n("4GE2"),g=n("3Pt+"),b=n("ofXK"),v=n("kmnG"),C=n("qFsG"),y=n("/1cH"),w=n("ccMj"),O=n("FKr1"),P=n("Xa2L"),S=n("MWKN"),I=function(){return(I=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},x=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],c=0,s=r.length;c<s;c++,o++)i[o]=r[c];return i},L=["itemInput"],k=["trigger"];function T(t,e){1&t&&(i.Vb(0,"i",10),i.Vc(1,"search_icon"),i.Ub())}function _(t,e){if(1&t&&(i.Vb(0,"span",16),i.Vc(1),i.Ub()),2&t){var n=i.ic().$implicit;i.Cb(1),i.Wc(n.category.name)}}function V(t,e){if(1&t&&(i.Vb(0,"span",16),i.Vc(1),i.Ub()),2&t){var n=i.ic().$implicit;i.Cb(1),i.Xc("",n.duration," min")}}function F(t,e){if(1&t&&(i.Vb(0,"span",16),i.Vc(1),i.Ub()),2&t){var n=i.ic().$implicit;i.Cb(1),i.Wc(n.size)}}function M(t,e){if(1&t&&(i.Vb(0,"span",17),i.Vc(1),i.jc(2,"currencyPipe"),i.Ub()),2&t){var n=i.ic().$implicit;i.Cb(1),i.Wc(i.kc(2,1,n.price))}}var q=function(t,e){return{"services-products-header":t,"no-results":e}};function D(t,e){if(1&t&&(i.Vb(0,"mat-option",11),i.jc(1,"lowercase"),i.Vb(2,"div",12),i.Vb(3,"span",13),i.Vc(4),i.Ub(),i.Tc(5,_,2,1,"span",14),i.Tc(6,V,2,1,"span",14),i.Tc(7,F,2,1,"span",14),i.Tc(8,M,3,3,"span",15),i.Ub(),i.Ub()),2&t){var n=e.$implicit,o=i.ic();i.sc("qa","",i.kc(1,10,n.name),"-option"),i.qc("value",n)("disabled","-1"===n.id||"-2"===n.id||"Membership"===n.type)("hidden",o.itemsLoading||o.loadingTicketItem),i.Cb(3),i.qc("ngClass",i.xc(12,q,"-2"===n.id,"-1"===n.id)),i.Cb(1),i.Wc(n.name),i.Cb(1),i.qc("ngIf",n.category),i.Cb(1),i.qc("ngIf",n.duration&&o.showItemDetails),i.Cb(1),i.qc("ngIf",n.size&&o.showItemDetails),i.Cb(1),i.qc("ngIf",o.showItemDetails&&(n.price||0===n.price))}}function E(t,e){1&t&&(i.Vb(0,"mat-option",18),i.Vb(1,"div",12),i.Vb(2,"div",19),i.Qb(3,"mat-spinner",20),i.Ub(),i.Ub(),i.Ub()),2&t&&(i.Cb(3),i.qc("diameter",30))}var N=function(t){return{"small-search-item-text":t}},U=function(t,e){return{"item-search-field":t,"small-form-field":e}},A=function(){function t(t,e,n){this.searchItemService=t,this.prepaidApiService=e,this.resourceApiService=n,this.types=[],this.petServiceTypes=void 0,this.formControlString="itemText",this.showIcon=!0,this.showPreviousPurchases=!0,this.showTicketItemTypeHeader=!0,this.showItemDetails=!0,this.selection=new i.o,this.ticketItemType=a.c,this.filteredItems=[],this.ngUnsubscribe=new r.a,this.displayItem=function(t){return t?t.name:""}}return t.prototype.ngOnInit=function(){var t=this;this.items=this.itemsForm.get(this.formControlString).valueChanges.pipe(Object(l.a)(""),Object(u.a)(300),Object(p.a)((function(e){if("string"!=typeof e)return Promise.resolve(t.filterOutItems&&t.filterOutItems.length>0?t.filterDuplicatesFromResults(x(t.filteredItems)):x(t.filteredItems));t.lastSearchTextValue=e,t.itemsLoading=!0;var n=!0,i=[];if(void 0!==t.clientId&&t.clientId!==m.b.WALK_IN){if(t.hasClient=!0,!t.lastSearchTextValue&&t.showPreviousPurchases){var r=[];t.types.forEach((function(e){e!==a.c.Service&&e!==a.c.Product||r.push(t.searchItemService.getPreviousPurchasesAsItemSearchResults(t.clientId,e,t.petServiceTypes))})),t.types.includes(a.c.Package)&&r.push(t.prepaidApiService.getList(t.clientId,!0)),i.push(Promise.all(r).then((function(e){var n=t.types.findIndex((function(t){return t===a.c.Product})),i=t.types.findIndex((function(t){return t===a.c.Service}));return{previousServices:i>=0?e[i]:void 0,previousProducts:n>=0?e[n]:void 0}})))}}else t.clientId===m.b.WALK_IN?(t.hasClient=!0,t.types=t.types.filter((function(t){return t!==a.c.Membership}))):t.hasClient=!1;if(t.types.includes(a.c.Resource)&&t.types.length>1&&console.error("types array contains Resource. All other types will be ignored for now."),t.types.includes(a.c.Resource)){var s=t.searchItemService.getResourceItems(t.lastSearchTextValue,t.maxResults,t.resourceType).then((function(e){var i=Object(o.cloneDeep)(e.entities);return i.length&&(t.showTicketItemTypeHeader&&i.unshift(t.addItemLabel("resources")),n=!1),I(I({},e),{entities:i})}));i.push(s)}else s=t.searchItemService.getItems(t.lastSearchTextValue,t.types,t.maxResults,t.petServiceTypes).then((function(e){var i=Object(o.cloneDeep)(e);return Object.keys(i).forEach((function(e){i[e]&&i[e].length&&(t.showTicketItemTypeHeader&&i[e].unshift(t.addItemLabel(e)),n=!1)})),t.clientId===m.b.WALK_IN?(i.services=i.services.filter((function(t){return void 0===t.extra||t.extra&&t.extra.petServiceType!==c.a.DAYCARE})),i):i})).catch((function(t){throw t})),i.push(s);return Promise.all(i).then((function(e){return t.filteredItems=[],n&&t.lastSearchTextValue?(t.itemsLoading=!1,t.filteredItems=[],[{id:"-1",name:"No items could be found for the current search value..."}]):(e.forEach((function(e){Object.keys(e).forEach((function(n){("previousServices"===n||"previousProducts"===n)&&e[n]&&e[n].length&&(e[n].unshift(t.addItemLabel(n)),t.filteredItems=x(t.filteredItems,e[n])),"previousServices"!==n&&"previousProducts"!==n&&"totalCount"!==n&&"startIndex"!==n&&(t.filterOutItems&&t.filterOutItems.length>0?t.filteredItems=t.filterDuplicatesFromResults(x(t.filteredItems,e[n])):(t.filteredItems=x(t.filteredItems,e[n]),"entities"===n&&null==t.filteredItems[0]&&t.filteredItems.splice(0,1)))}))})),t.itemsLoading=!1,t.filteredItems)}))})))},t.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.prototype.addItemLabel=function(t){switch(t){case"services":return{id:"-2",name:"Services",type:a.c.Service,price:void 0};case"products":return{id:"-2",name:"Products",type:a.c.Product,price:void 0};case"packages":return{id:"-2",name:"Packages",type:a.c.Package,price:void 0};case"memberships":return{id:"-2",name:"Memberships",type:a.c.Membership,price:void 0};case"previousServices":return{id:"-2",name:"Previous Services",type:a.c.Service,price:void 0};case"previousProducts":return{id:"-2",name:"Previous Products",type:a.c.Product,price:void 0};case"resources":return{id:"-2",name:"Resources",type:a.c.Resource,price:void 0}}},t.prototype.filterDuplicatesFromResults=function(t){var e=this;return t.filter((function(t){return!e.filterOutItems.some((function(e){return e.id===t.id}))}))},t.prototype.getDefaultResults=function(){(void 0!==this.clientId&&!this.hasClient||void 0===this.clientId&&this.hasClient||this.lastSearchTextValue&&this.lastSearchTextValue.length)&&(this.itemsLoading=!0,this.itemsForm.get(this.formControlString).setValue(""))},t.prototype.itemSelected=function(t){var e;t instanceof s.b?this.selection.emit(t):(e=this.searchItemService.convertFromItemSearchResult(t),this.selection.emit(e)),this.isReturn?(this.trigger.writeValue(t),this.trigger.closePanel()):(this.itemInput.nativeElement.blur(),this.itemsForm.get(this.formControlString).setValue("",{emitEvent:!1}))},t.prototype.onItemEnter=function(){var t=this.filteredItems.filter((function(t){return"-2"!==t.id}));1===t.length&&(this.itemSelected(t[0]),this.trigger.closePanel())},t.\u0275fac=function(e){return new(e||t)(i.Pb(d.a),i.Pb(f.a),i.Pb(h.a))},t.\u0275cmp=i.Jb({type:t,selectors:[["search-items-component"]],viewQuery:function(t,e){var n;1&t&&(i.Oc(L,!0),i.Oc(k,!0)),2&t&&(i.Cc(n=i.fc())&&(e.itemInput=n.first),i.Cc(n=i.fc())&&(e.trigger=n.first))},inputs:{placeholder:"placeholder",itemsForm:"itemsForm",clientId:"clientId",types:"types",petServiceTypes:"petServiceTypes",maxResults:"maxResults",formControlString:"formControlString",small:"small",showIcon:"showIcon",isReturn:"isReturn",showPreviousPurchases:"showPreviousPurchases",showTicketItemTypeHeader:"showTicketItemTypeHeader",filterOutItems:"filterOutItems",showItemDetails:"showItemDetails",resourceType:"resourceType",loadingTicketItem:"loadingTicketItem"},outputs:{selection:"selection"},decls:12,vars:18,consts:[[1,"search-items-component",3,"formGroup"],[1,"field-content",3,"ngClass"],[3,"ngClass","floatLabel"],["class","material-icons",4,"ngIf"],["matInput","","data-lpignore","true","type","text","qa","add-items-text",3,"formControlName","placeholder","matAutocomplete","focus","keyup.enter"],["itemInput","","trigger","matAutocompleteTrigger"],[1,"item-autocomplete","card-autocomplete",3,"displayWith","optionSelected"],["autoItems","matAutocomplete"],[3,"value","disabled","hidden","qa",4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],[1,"material-icons"],[3,"value","disabled","hidden","qa"],[1,"item-row"],[1,"item",3,"ngClass"],["class","additional-info-one",4,"ngIf"],["class","additional-info-two",4,"ngIf"],[1,"additional-info-one"],[1,"additional-info-two"],["disabled",""],[1,"search-spinner"],["color","primary",3,"diameter"]],template:function(t,e){if(1&t&&(i.Vb(0,"form",0),i.Vb(1,"div",1),i.Vb(2,"mat-form-field",2),i.Tc(3,T,2,0,"i",3),i.Vb(4,"input",4,5),i.ec("focus",(function(){return e.getDefaultResults()}))("keyup.enter",(function(){return e.onItemEnter()})),i.Ub(),i.Vb(7,"mat-autocomplete",6,7),i.ec("optionSelected",(function(t){return e.itemSelected(t.option.value)})),i.Tc(9,D,9,15,"mat-option",8),i.jc(10,"async"),i.Tc(11,E,4,1,"mat-option",9),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&t){var n=i.Dc(8);i.qc("formGroup",e.itemsForm),i.Cb(1),i.qc("ngClass",i.wc(13,N,e.small)),i.Cb(1),i.qc("ngClass",i.xc(15,U,!e.small,e.small))("floatLabel","never"),i.Cb(1),i.qc("ngIf",e.showIcon),i.Cb(1),i.qc("formControlName",e.formControlString)("placeholder",e.placeholder)("matAutocomplete",n),i.Cb(3),i.qc("displayWith",e.displayItem),i.Cb(2),i.qc("ngForOf",i.kc(10,11,e.items)),i.Cb(2),i.qc("ngIf",e.itemsLoading)}},directives:[g.L,g.w,g.m,b.q,v.c,b.t,C.b,g.d,y.d,w.b,g.v,g.k,y.a,b.s,O.o,P.c],pipes:[b.b,b.p,S.a],styles:[".field-content[_ngcontent-%COMP%]   .item-search-field[_ngcontent-%COMP%]{width:400px}.field-content[_ngcontent-%COMP%]   .item-search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;width:390px;padding-left:25px}.field-content[_ngcontent-%COMP%]   .item-search-field[_ngcontent-%COMP%]    .mat-form-field-label-wrapper .mat-form-field-label{color:#cdcdcd;font-size:16px;padding-left:25px}.field-content[_ngcontent-%COMP%]   .item-search-field[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{position:absolute;color:#222}.field-content[_ngcontent-%COMP%]     .mat-form-field-label{font-size:16px!important}div.item-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.services-products-header[_ngcontent-%COMP%]{font-weight:700;font-size:18px!important;padding-left:0!important}span.item[_ngcontent-%COMP%]{color:#222;font-family:DM Sans,Arial,sans-serif;padding-left:8px;font-size:16px!important;width:317px;overflow:hidden;text-overflow:ellipsis}span.additional-info-one[_ngcontent-%COMP%]{width:90px}span.additional-info-one[_ngcontent-%COMP%], span.additional-info-two[_ngcontent-%COMP%]{text-align:right;overflow:hidden;text-overflow:ellipsis;font-size:16px;color:#656565}span.additional-info-two[_ngcontent-%COMP%]{min-width:65px}.additional-options-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-bottom:45px}.mat-autocomplete-panel[_ngcontent-%COMP%],   .item-autocomplete{min-width:500px;max-height:220px}.mat-autocomplete-panel[_ngcontent-%COMP%]     .mat-option,   .item-autocomplete   .mat-option{height:30px!important}.mat-autocomplete-panel[_ngcontent-%COMP%]::-webkit-scrollbar,   .item-autocomplete::-webkit-scrollbar{width:5px}.mat-autocomplete-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track,   .item-autocomplete::-webkit-scrollbar-track{background:#f1f1f1}.mat-autocomplete-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb,   .item-autocomplete::-webkit-scrollbar-thumb{background:#888}.mat-autocomplete-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover,   .item-autocomplete::-webkit-scrollbar-thumb:hover{background:#555}.search-spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.no-results[_ngcontent-%COMP%]{color:#949393!important;font-size:16px!important;width:100%!important}.small-search-item-text[_ngcontent-%COMP%]{font-size:14px}.small-form-field[_ngcontent-%COMP%]{width:100%}"]}),t}()},MtTG:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n("fXoL"),o=n("3Pt+"),r=n("+0xr"),c=n("Coov"),s=n("3fQp"),a=n("XNiG"),l=n("vkgz"),u=n("1G5W"),p=n("lJxs"),d=n("/uUt"),m=n("Kj3r"),f=n("eIep"),h=n("Y9WU"),g=n("tyNb"),b=["searchbar"],v=["matTableContainer"],C=new i.s("GenericServiceInterface"),y=function(){function t(t,e,n,i){this.router=t,this.genericService=e,this.permissionsService=n,this.analyticsService=i,this.searchCtrl=new o.i(""),this.totalCount=0,this.initialParams={startIndex:0},this.noCategorySelected=!1,this.ngUnsubscribe=new a.a}return t.prototype.ngOnInit=function(){this.listenToPermissionUpdate(),this.categoryFilterText="All Categories",this.showPageModule&&(this.initListFilters(),this.listenToSearchChange(),this.listenToListLoading(),this.listenToListUpdate(),this.updateList(this.initialParams),this.analyticsService.trackEvent("["+this.pageRoute+"] View List"))},t.prototype.scrollMatTableToTop=function(){this.matTableContainer.nativeElement.scrollTop=0},t.prototype.setPermissions=function(){this.showPageModule=!this.viewPagePermEnum||this.permissionsService.hasEmployeePermission(this.viewPagePermEnum),this.canAdd=!this.addPermEnum||this.permissionsService.hasEmployeePermission(this.addPermEnum),this.canEdit=!this.editPermEnum||this.permissionsService.hasEmployeePermission(this.editPermEnum),this.canDelete=!this.deletePermEnum||this.permissionsService.hasEmployeePermission(this.deletePermEnum)},t.prototype.updateList=function(t){return e=this,void 0,i=function(){return function(t,e){var n,i,o,r,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){c.label=r[1];break}if(6===r[0]&&c.label<o[1]){c.label=o[1],o=r;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(r);break}o[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(s){r=[6,s],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(e){switch(e.label){case 0:return[4,this.genericService.updateList(t)];case 1:return[2,e.sent()]}}))},new((n=void 0)||(n=Promise))((function(t,o){function r(t){try{s(i.next(t))}catch(e){o(e)}}function c(t){try{s(i.throw(t))}catch(e){o(e)}}function s(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,c)}s((i=i.apply(e,[])).next())}));var e,n,i},t.prototype.listenToPermissionUpdate=function(){var t=this;this.setPermissions(),this.permissionsService.permissionsUpdated().pipe(Object(l.a)((function(){return t.setPermissions()})),Object(u.a)(this.ngUnsubscribe)).subscribe()},t.prototype.initListFilters=function(){var t=this;this.genericService.listFilterInitialized().pipe(Object(l.a)((function(e){t.totalCount=e.totalCount,t.activeFilter=e.status,t.searchCtrl.patchValue(e.searchString,{emitEvent:!1})})),Object(u.a)(this.ngUnsubscribe)).subscribe()},t.prototype.listenToListLoading=function(){var t=this;this.genericService.listIsLoading().pipe(Object(l.a)((function(e){var n=e.loading,i=e.error;t.initialLoading=e.initial&&n,t.loading=n,i&&t.scrollMatTableToTop(),t.error=i})),Object(u.a)(this.ngUnsubscribe)).subscribe()},t.prototype.listenToListUpdate=function(){var t=this;this.dataSource$=this.genericService.listUpdated().pipe(Object(p.a)((function(e){return 0===e.startIndex&&t.scrollMatTableToTop(),t.totalCount=e.totalCount,new r.p(e.entities)})),Object(u.a)(this.ngUnsubscribe))},t.prototype.listenToSearchChange=function(){var t=this;this.searchCtrl.valueChanges.pipe(Object(d.a)(),Object(m.a)(500),Object(f.a)((function(e){return t.updateList({startIndex:0,searchString:e,categoryNameList:t.categoryFilter})})),Object(u.a)(this.ngUnsubscribe)).subscribe()},t.prototype.onForceStatusFilterChange=function(t){this.activeFilter=t,this.updateList({startIndex:0,activeFilter:t})},t.prototype.onStatusFilterChange=function(t){this.activeFilter=t.value,this.updateList({startIndex:0,activeFilter:t.value})},t.prototype.onCategoryFilterChange=function(t,e){var n;this.noCategorySelected=0===t.value.length,this.categoryFilter=t.value,"All"===this.categoryFilter[0]?(n=null,this.categoryFilterText="All Categories"):n=this.updateCategoryFilterText(n,e),this.updateList({startIndex:0,activeFilter:this.activeFilter,categoryNameList:n})},t.prototype.updateCategoryFilterText=function(t,e){switch(this.categoryFilter.length){case e:e>1&&(t=null,this.categoryFilterText="All Categories");break;case 1:this.categoryFilterText=this.categoryFilter[0],t=this.categoryFilter;break;default:t=this.categoryFilter,this.categoryFilterText=this.categoryFilter[0]+" (+"+(this.categoryFilter.length-1)+")"}return t},t.prototype.onSortByColumnChange=function(t){this.updateList({startIndex:0,orderByColumn:this.orderByColumn?this.orderByColumn[t.active]:t.active,descending:"desc"===t.direction})},t.prototype.onScroll=function(){this.loading||this.genericService.getNextPage()},t.prototype.delete=function(t){this.genericService.startDeleteProcess(t)},t.prototype.clearSearch=function(){this.searchCtrl.patchValue("")},t.prototype.navigateToAdd=function(){this.router.navigate(["/"+this.pageRoute+"/add"])},t.prototype.navigateToDetail=function(t){this.genericService.setTitle(t.name),this.router.navigate(["/"+this.pageRoute,t.id])},t.prototype.trackByFn=function(t,e){return e.id},t.prototype.resetStatus=function(t){(t.keyCode||t.which)===s.a.Escape&&(this.searchCtrl.setValue(""),this.searchbar.nativeElement.blur())},t.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.\u0275fac=function(e){return new(e||t)(i.Pb(g.g),i.Pb(C),i.Pb(c.c),i.Pb(h.a))},t.\u0275cmp=i.Jb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(i.Oc(b,!0),i.Oc(v,!0)),2&t&&(i.Cc(n=i.fc())&&(e.searchbar=n.first),i.Cc(n=i.fc())&&(e.matTableContainer=n.first))},decls:1,vars:0,template:function(t,e){1&t&&i.Qb(0,"div")},encapsulation:2}),t}()},xQ8B:function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var i=n("fXoL"),o=n("MWKN"),r=n("rvT1"),c=n("ofXK"),s=n("3Pt+"),a=n("kmnG"),l=n("qFsG"),u=n("ccMj"),p=n("A5z7");function d(t,e){if(1&t&&(i.Vb(0,"mat-label"),i.Vc(1),i.Vb(2,"span",8),i.Vc(3,"*"),i.Ub(),i.Ub()),2&t){var n=i.ic(2);i.Cb(1),i.Xc(" ",n.label,": ")}}var m=function(t){return{"currency-input-text-error":t}};function f(t,e){if(1&t){var n=i.Wb();i.Vb(0,"input",9),i.ec("blur",(function(){return i.Hc(n),i.ic(2).currencyChange()})),i.Ub()}if(2&t){var o=i.ic(2);i.qc("ngClass",i.wc(3,m,o.outlineErrors&&(o.formControl.touched||o.submitted)&&(null==o.formControl?null:o.formControl.errors)))("formControlName",o.formControlString)("placeholder",o.placeholder)}}function h(t,e){if(1&t){var n=i.Wb();i.Vb(0,"input",10),i.ec("blur",(function(){return i.Hc(n),i.ic(2).currencyChange()})),i.Ub()}if(2&t){var o=i.ic(2);i.qc("ngClass",i.wc(3,m,o.outlineErrors&&(o.formControl.touched||o.submitted)&&(null==o.formControl?null:o.formControl.errors)))("formControlName",o.formControlString)("placeholder",o.placeholder)}}function g(t,e){if(1&t){var n=i.Wb();i.Vb(0,"mat-chip",13),i.ec("click",(function(){i.Hc(n);var t=e.$implicit;return i.ic(3).chipClick(t)})),i.jc(1,"currencyPipe"),i.Vc(2),i.jc(3,"currencyPipe"),i.Ub()}if(2&t){var o=e.$implicit;i.sc("qa","currency-amount-",i.kc(1,2,o),""),i.Cb(2),i.Xc("+",i.kc(3,4,o)," ")}}function b(t,e){if(1&t&&(i.Vb(0,"mat-chip-list",11),i.Tc(1,g,4,6,"mat-chip",12),i.Ub()),2&t){var n=i.ic(2);i.Cb(1),i.qc("ngForOf",n.chips)}}function v(t,e){1&t&&(i.Vb(0,"div",15),i.Vc(1," Value must be greater than 0."),i.Ub())}function C(t,e){1&t&&(i.Vb(0,"div",15),i.Vc(1," This field is required."),i.Ub())}function y(t,e){1&t&&(i.Vb(0,"div",15),i.Vc(1," Must be valid currency value."),i.Ub())}function w(t,e){1&t&&(i.Vb(0,"div",15),i.Vc(1," Value exceeds gift card balance."),i.Ub())}function O(t,e){1&t&&(i.Vb(0,"div",15),i.Vc(1," Value exceeds amount owed."),i.Ub())}function P(t,e){if(1&t&&(i.Tb(0),i.Tc(1,v,2,0,"div",14),i.Tc(2,C,2,0,"div",14),i.Tc(3,y,2,0,"div",14),i.Tc(4,w,2,0,"div",14),i.Tc(5,O,2,0,"div",14),i.Sb()),2&t){var n=i.ic(2);i.Cb(1),i.qc("ngIf",(n.formControl.touched||n.submitted)&&(null==n.formControl||null==n.formControl.errors?null:n.formControl.errors.zero)&&!(null!=n.formControl&&null!=n.formControl.errors&&n.formControl.errors.required)),i.Cb(1),i.qc("ngIf",(n.formControl.touched||n.submitted)&&(null==n.formControl||null==n.formControl.errors?null:n.formControl.errors.required)),i.Cb(1),i.qc("ngIf",(n.formControl.touched||n.submitted)&&(null==n.formControl||null==n.formControl.errors?null:n.formControl.errors.format)),i.Cb(1),i.qc("ngIf",(n.formControl.touched||n.submitted)&&!(null!=n.formControl&&null!=n.formControl.errors&&n.formControl.errors.required)&&(null==n.formControl||null==n.formControl.errors?null:n.formControl.errors.balance)),i.Cb(1),i.qc("ngIf",(n.formControl.touched||n.submitted)&&!(null!=n.formControl&&null!=n.formControl.errors&&n.formControl.errors.required)&&(null==n.formControl||null==n.formControl.errors?null:n.formControl.errors.overpaid))}}var S=function(t,e,n){return{"small-form-field":t,"large-form-field":e,"outline-error":n}};function I(t,e){if(1&t&&(i.Vb(0,"form",2),i.Vb(1,"mat-form-field",3),i.Tc(2,d,4,1,"mat-label",4),i.Tc(3,f,1,5,"input",5),i.Tc(4,h,1,5,"input",6),i.Ub(),i.Tc(5,b,2,1,"mat-chip-list",7),i.Tc(6,P,6,5,"ng-container",4),i.Ub()),2&t){var n=i.ic();i.qc("formGroup",n.form),i.Cb(1),i.qc("ngClass",i.yc(8,S,n.smallField,n.largeField,n.outlineErrors&&(n.formControl.touched||n.submitted)&&(null==n.formControl?null:n.formControl.errors)))("floatLabel",n.floatLabel),i.Cb(1),i.qc("ngIf",n.label),i.Cb(1),i.qc("ngIf",n.focus),i.Cb(1),i.qc("ngIf",!n.focus),i.Cb(1),i.qc("ngIf",n.chips),i.Cb(1),i.qc("ngIf",!n.hideErrorMsg)}}function x(t,e){if(1&t&&(i.Vb(0,"div",16),i.Vb(1,"label"),i.Vc(2),i.Ub(),i.Vb(3,"span"),i.Vc(4),i.jc(5,"currencyPipe"),i.Ub(),i.Ub()),2&t){var n=i.ic();i.Cb(2),i.Xc(" ",n.label,": "),i.Cb(2),i.Wc(i.kc(5,2,n.form.get("amount").value))}}var L=function(){function t(t,e){this.currency=t,this.localeService=e,this.blurEvent=new i.o,this.focus=!0,this.allowEmpty=!1,this.floatLabel="always"}return Object.defineProperty(t.prototype,"formControl",{get:function(){return this.form.get(this.formControlString)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.formControl.value&&this.currencyChange()},t.prototype.currencyChange=function(t){if(void 0===t&&(t=!0),!this.form.controls[this.formControlString].invalid){var e,n=this.formControl.value;e=n&&String(n).trim()?this.localeService.normalizeCurrencyValue(n):"",this.form.controls[this.formControlString].patchValue(this.transformCurrency(e),{emitEvent:!1}),this.formControlValueString&&this.form.controls[this.formControlValueString]&&this.form.controls[this.formControlValueString].patchValue(e,{emitEvent:!1}),t&&this.blurEvent.emit({value:e,display:this.transformCurrency(e)})}},t.prototype.chipClick=function(t){var e=this.localeService.normalizeCurrencyValue(this.form.get(this.formControlString).value,!0)+t;this.form.controls[this.formControlString].patchValue(this.transformCurrency(e),{emitEvent:!1}),this.formControlValueString&&this.form.controls[this.formControlValueString].patchValue(e,{emitEvent:!1}),this.form.controls[this.formControlString].markAsDirty()},t.prototype.transformCurrency=function(t){return this.allowEmpty&&!t?"":this.currency.transform(t=t||0)},t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(r.a))},t.\u0275cmp=i.Jb({type:t,selectors:[["currency-input-component"]],inputs:{form:"form",formControlString:"formControlString",formControlValueString:"formControlValueString",chips:"chips",submitted:"submitted",label:"label",placeholder:"placeholder",required:"required",giftCard:"giftCard",static:"static",smallField:"smallField",largeField:"largeField",outlineErrors:"outlineErrors",hideErrorMsg:"hideErrorMsg",focus:"focus",allowEmpty:"allowEmpty",floatLabel:"floatLabel"},outputs:{blurEvent:"blurEvent"},decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],["class","static-amount-container",4,"ngIf"],[3,"formGroup"],[1,"currency-input-form-field",3,"ngClass","floatLabel"],[4,"ngIf"],["qa","currency-input","matInput","","type","text","autocomplete","off","focusAndSelect","",3,"ngClass","formControlName","placeholder","blur",4,"ngIf"],["qa","currency-input","matInput","","type","text","autocomplete","off",3,"ngClass","formControlName","placeholder","blur",4,"ngIf"],["class","currency-chip-list",4,"ngIf"],[1,"error-symb"],["qa","currency-input","matInput","","type","text","autocomplete","off","focusAndSelect","",3,"ngClass","formControlName","placeholder","blur"],["qa","currency-input","matInput","","type","text","autocomplete","off",3,"ngClass","formControlName","placeholder","blur"],[1,"currency-chip-list"],["class","currency-chip",3,"qa","click",4,"ngFor","ngForOf"],[1,"currency-chip",3,"qa","click"],["class","form-error",4,"ngIf"],[1,"form-error"],[1,"static-amount-container"]],template:function(t,e){1&t&&(i.Tc(0,I,7,12,"form",0),i.Tc(1,x,6,4,"div",1)),2&t&&(i.qc("ngIf",!e.static),i.Cb(1),i.qc("ngIf",e.static))},directives:[c.t,s.L,s.w,s.m,a.c,c.q,a.g,l.b,s.d,u.b,s.v,s.k,p.d,c.s,p.a],pipes:[o.a],styles:[".form-error[_ngcontent-%COMP%]{color:#e74c3c;font-size:11px;display:inline}.currency-input-form-field[_ngcontent-%COMP%]{width:100%}.currency-input-form-field[_ngcontent-%COMP%]   .error-symb[_ngcontent-%COMP%]{color:#e74c3c}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:0}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{top:-20px}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-empty{top:27px;text-align:right;left:auto;right:10px;color:rgba(0,0,0,.54)!important}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-flex{border:1px solid #656565}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-flex   .mat-form-field-infix{padding-left:10px;border:0;border-right:none}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-flex   .mat-form-field-infix input{text-align:right;padding-right:10px;color:#222}.currency-input-form-field[_ngcontent-%COMP%]     .mat-form-field-flex .mat-icon-button{font-size:21px;color:#222}.small-form-field[_ngcontent-%COMP%]{width:100px}.large-form-field[_ngcontent-%COMP%]{width:290px}.large-form-field[_ngcontent-%COMP%]     .mat-form-field-empty{right:30px;top:28px}.outline-error[_ngcontent-%COMP%]     .mat-form-field-flex{border:1px solid #e74c3c!important}.currency-input-text-error[_ngcontent-%COMP%]{color:#e74c3c!important}.static-amount-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:-21px}.static-amount-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#cdcdcd}.currency-chip-list[_ngcontent-%COMP%]     .mat-chip-list-wrapper{margin-top:0;justify-content:space-between}.currency-chip[_ngcontent-%COMP%]{font-size:11px;min-height:25px;padding:7px}"]}),t}()}}]);